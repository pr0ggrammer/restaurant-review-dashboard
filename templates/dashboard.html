<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Review Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Background gradient -->
    <div class="background-gradient"></div>
    
    <!-- Loading overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading dashboard data...</p>
    </div>
    
    <!-- Main dashboard container -->
    <div class="dashboard-container">
        <!-- Header section -->
        <header class="glass-header">
            <div class="header-content">
                <h1 class="dashboard-title">Restaurant Review Dashboard</h1>
                <div class="header-controls">
                    <button id="refresh-btn" class="glass-button" title="Refresh Data">
                        <span class="button-icon">↻</span>
                        Refresh
                    </button>
                    <div class="time-selector">
                        <select id="time-interval" class="glass-select">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly" selected>Monthly</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main content grid -->
        <main class="dashboard-grid">
            <!-- Overview metrics section -->
            <section class="glass-card overview-card">
                <div class="card-header">
                    <h2 class="card-title">Overview Metrics</h2>
                    <div class="card-status" id="overview-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <div class="metric-value" id="total-reviews">--</div>
                            <div class="metric-label">Total Reviews</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="average-rating">--</div>
                            <div class="metric-label">Average Rating</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="sentiment-score">--</div>
                            <div class="metric-label">Sentiment Score</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value" id="helpful-votes">--</div>
                            <div class="metric-label">Helpful Votes</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Rating trends chart -->
            <section class="glass-card chart-card">
                <div class="card-header">
                    <h2 class="card-title">Rating Trends</h2>
                    <div class="card-status" id="trends-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="rating-trends-chart"></canvas>
                    </div>
                </div>
            </section>
            
            <!-- Review volume chart -->
            <section class="glass-card chart-card">
                <div class="card-header">
                    <h2 class="card-title">Review Volume</h2>
                    <div class="card-status" id="volume-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="review-volume-chart"></canvas>
                    </div>
                </div>
            </section>
            
            <!-- Sentiment analysis -->
            <section class="glass-card chart-card">
                <div class="card-header">
                    <h2 class="card-title">Sentiment Analysis</h2>
                    <div class="card-status" id="sentiment-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="sentiment-container">
                        <div class="chart-container">
                            <canvas id="sentiment-chart"></canvas>
                        </div>
                        <div class="sentiment-summary" id="sentiment-summary">
                            <div class="sentiment-item positive">
                                <span class="sentiment-label">Positive</span>
                                <span class="sentiment-percentage" id="positive-percentage">--%</span>
                            </div>
                            <div class="sentiment-item negative">
                                <span class="sentiment-label">Negative</span>
                                <span class="sentiment-percentage" id="negative-percentage">--%</span>
                            </div>
                            <div class="sentiment-item neutral">
                                <span class="sentiment-label">Neutral</span>
                                <span class="sentiment-percentage" id="neutral-percentage">--%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Themes and insights -->
            <section class="glass-card themes-card">
                <div class="card-header">
                    <h2 class="card-title">Key Themes</h2>
                    <div class="card-status" id="themes-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="themes-container" id="themes-container">
                        <p class="loading-text">Loading themes...</p>
                    </div>
                </div>
            </section>
            
            <!-- Rating distribution -->
            <section class="glass-card distribution-card">
                <div class="card-header">
                    <h2 class="card-title">Rating Distribution</h2>
                    <div class="card-status" id="distribution-status">
                        <span class="status-indicator loading"></span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="rating-bars" id="rating-distribution">
                        <div class="rating-bar" data-rating="5">
                            <span class="rating-label">5 ★</span>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="rating-count">0</span>
                        </div>
                        <div class="rating-bar" data-rating="4">
                            <span class="rating-label">4 ★</span>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="rating-count">0</span>
                        </div>
                        <div class="rating-bar" data-rating="3">
                            <span class="rating-label">3 ★</span>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="rating-count">0</span>
                        </div>
                        <div class="rating-bar" data-rating="2">
                            <span class="rating-label">2 ★</span>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="rating-count">0</span>
                        </div>
                        <div class="rating-bar" data-rating="1">
                            <span class="rating-label">1 ★</span>
                            <div class="bar-container">
                                <div class="bar-fill" style="width: 0%"></div>
                            </div>
                            <span class="rating-count">0</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Error message overlay -->
        <div id="error-overlay" class="error-overlay hidden">
            <div class="error-content glass-card">
                <h3>Error Loading Data</h3>
                <p id="error-message">An error occurred while loading dashboard data.</p>
                <button id="retry-btn" class="glass-button">Retry</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>